let dinosaurNoteMap = {
	carnotaurus: {
		state: "Listen",
		note: "Height: 3 - 3.6 meters ( 10 - 12 feet ). Length: 5.8-9 meters / 19.2-30 feet. Weight: 1 ton / 2,000 lbs. Speed: 48 – 56 kph / 30–35 mph. Dietary: Carnivore. Location: Argentina (South America). Period: Late Cretaceous. Years MYA: 83.5 - 66. Carnotaurus was one of the most bizarre yet dangerous meat-eating dinosaurs ever found. Its skull was short, with spiked armor in the form of feature scales across its body (skin impressions show this, although it is unknown around the face since the impressions for that area were destroyed) on the top and a pair of knobby horns over its small eyes. The neck and shoulder blades were well developed, but the arms were incredibly short, with forearms so shrunken they were practically just wrists; not even Tyrannosaurus rex had such small arms. With its small skull and weak bite force, Carnotaurus might not have been able to attack big plant-eaters, but it was probably fast due to its long and powerfully built legs and could have easily chased down smaller, agile prey.[1] In fact, research has indicated that despite Carnotaurus’ small head, its jaws were able to open very widely apart from other theropod dinosaurs in order to catch prey. The horns of Carnotaurus look something like those of a bull - and like a bull, it may have used them in contests with others of its own species. In this way, two Carnotaurus could test each other's strength without either of them seriously injuring the other. Carnotaurus has become quite famous as a result of its starring role in the Disney animated film Dinosaur, however the animal depicted in the film are closer in size to Tyrannosaurus rex than the actual real Carnotaurus.",
	},
	triceratops: {
		state: "Listen",
		note: "Height: 3 meters / 10 feet. Length: 9 - 10 meters / 30 - 33 feet. Weight: 7 - 13 tons / 14,000 - 26,455 lbs. Speed: 30 – 35 mph. Dietary: Herbivore. Location: North America. Period: Late Cretaceous. Years MYA: 83.5 - 66. Triceratops is an extinct genus of herbivorous chasmosaurine ceratopsid dinosaur which lived at the very end of the Cretaceous period. It had a huge frilled head with horns over each eye that could reach over 3 feet long. Triceratops had a third, smaller horn on its nose. These would be fearsome weapons against a predator. Triceratops is one of the most common dinosaur fossils found. More than 50 skulls have been found. Within the genus, at least 7 species have been identified. The ceratopsian family is one of the most successful and varied of the Late Cretaceous. Triceratops is the largest member of this family, reaching the size of a school bus. Triceratops was a herd animal; it is believed that large groups numbering into the hundreds roamed North America. Their large, horny beaks and long rows of teeth were well designed for chewing the tough, low-growing plants of the Late Cretaceous. It was likely the main predator of these animals was Tyrannosaurus rex. A number of skeletons show bite and chew marks that match the teeth of T. rex. Horns and frills seemed to vary among individuals within the species. Some frills were very broad, others narrow. The nasal horn shows the most variance among individual specimens, no two being the same. The material that covered its horns in life would have added significantly to the length of the fossilized bone.",
	},
	stegosaurus: {
		state: "Listen",
		note: "Height: 4 meters / 13 feet. Length: 10 meters / 33 feet. Weight: 3.4 tons / 6,800 lbs. Speed: 15.3 - 17.7 kph / 9.5 – 11 mph. Dietary: Herbivore. Location: North America. Period: Late Cretaceous. Years MYA: 155 - 150. Stegosaurus is easily one of the best known dinosaurs and is recognized all over the world. It is the largest and most famous member of the stegosaur family. It roamed the open plains of the Late Jurassic Period in what is now North America. The plates along its back, its small head and spiked tail make it a peculiar and unique dinosaur. This plant-eater evolved to find its food in the low-growing plants of the late Jurassic. The spikes on its tail would have made a powerful weapon against any hungry predators. Stegosaurus is often called the dumbest dinosaur because of its incredibly small brain. In fact, most scientists originally believed that its brain was too small to control such a large creature and that it used an auxiliary 'brain' located above its rear legs to help control its movements. This was not actually a brain, but a bundle of nerves that helped relay information from its real brain. Its brain was once thought to have been the size of a walnut, but CAT-scans proved that it was actually the size of a kitten. Most fascinating to people are the plates along its back. There has been a great deal of debate about their use and arrangement. The plates were up to 2-feet tall and 2-feet wide (0.6 meters). The most prevalent theory is that they were used for cooling or heating the animal. A more recent theory, however, suggests that they could have been used as a display during courtship and that they may have been brightly colored. It is also possible that they could move up and down, perhaps to intimidate predators. The spikes on its tail are also the subjects of some controversy. For years, every model of Stegosaurus showed it with the spikes sticking up into the air. It is only since the 1990s that it has become accepted that these spikes stuck out horizontal to the ground, which would have been a potent defensive weapon when swung at a hunter. Stegosaurus would have lived in family groups and herds, moving slowly through forests while eating the low-growing plants. Its front legs were considerably shorter than it's hind legs, making it adapted to nibbling the plants closest to the ground. Stegosaurus is the namesake for a large family of dinosaurs whose members were found all over the world. The Stegosaurus (its code name 'Stego') was a peaceful herbivore and probably roamed the prehistoric highlands in herds that size from small to large numbers, grazing on low ground plants. An average Stegosaurus was about the size of an elephant, standing about 11 feet tall. It had a very low intelligence (its brain was the size of a kitten). The bony plates on it's back may have served a dual purpose of a body temperature regulation and protection from large flesh-eating predators. Different species varied in the number of plates on their back.",
	},
	parasaurolophus: {
		state: "Listen",
		note: "Height: 4 meters / 13 feet. Length: 10 meters / 33 feet. Weight: 4 - 5 tons / 8,000 - 10,000 lbs. Speed: 40.2 kph / 25 mph. Dietary: Herbivore. Location: North America. Period: Late Cretaceous. Years MYA: 83.5 - 70.6. Parasaurolophus was a large, herbivorous, or plant-eating, dinosaur that inhabited North America during the late Cretaceous period, about 65 to 98 million years ago. Parasaurolophus is classified as a member of the family Hadrosauridae, which contains the crested, duckbilled dinosaurs and belongs to the order Ornithischia (the bird-hipped dinosaurs). Hadrosauridae is subdivided into two subfamilies based upon the structure of the cranial crest. The hadrosaurine duckbills, such as Maiasaura, either lacked crests or had crests of solid bone. The lambeosaurine duckbills, including Parasaurolophus, Corythosaurus, and Lambeosaurus, had showy, hollow crests. Apart from its bill, which was shorter than that of other hadrosaurs, the most distinctive feature of Parasaurolophus was its hornlike crest, which reached up to 6 feet (1.8 meters) in length and curved back from the head. This attribute inspired the name Parasaurolophus, which means “beside Saurolophus,” referring to another crested dinosaur. Inside the crest, which may have been shorter in females, paired nasal passages extended from the nostrils to the tip and then curved back down to the snout. Although paleontologists are not certain of the crest’s function, many believe that it served as a resonating chamber, producing a distinctive bellow that allowed conspecifics—that is, members of the same species—to communicate. While Parasaurolophus moved through heavy brush, the crest may have tucked into an unusual notch in the spine at the point where the crest abutted the back. In this position, the crest would have cleared a path by sweeping vegetation up or sideways, away from the body, in a manner similar to that of the cassowary, a modern bird. Parasaurolophus grew to an adult length of about 33 feet (10 meters), height of 15 feet (4.6 meters), and weight of 3 to 4 tons. Like all hadrosaurs, Parasaurolophus had long hind limbs and shorter forelimbs. Although it probably moved on all fours while foraging, presumably it was capable of sprinting away from predators on its rear legs. Parasaurolophus had a tail with an unusually broad base, which has caused paleontologists to speculate that it may have been used as a signaling device, either in courtship displays or possibly as another identifier among conspecifics. The first fossil evidence of Parasaurolophus was found in the Canadian province of Alberta and described in 1922. Remains have also been recovered in New Mexico and Utah in the United States.",
	},
	mosasaurus: {
		state: "Listen",
		note: "Length: 17.6 meters / 56 feet. Weight: 14,000 kg / 30,865 lbs. Speed: 48.0 kph / 29.8 mph. Dietary: Carnivore. Location: North America, Africa, Australia, New Zealand. Period: Late Cretaceous. Years MYA: 82 - 66. Mosasaur, (family Mosasauridae), extinct group of aquatic lizards that attained a high degree of adaptation to the marine environment and were distributed worldwide during the Cretaceous Period. The mosasaurs competed with other marine reptiles—the plesiosaurs and ichthyosaurs—for food, which consisted largely of ammonoids, fish, and cuttlefish. Many mosasaurs of the Late Cretaceous were large. The longest mosasaurs, based on a specimen of Mosasaurus hoffmanni, are estimated to have been 17 metres (about 56 feet) in length, but the most common forms were no larger than modern porpoises. Mosasaurs had a snakelike body with a large skull and a long snout. Their limbs were modified into paddles having shorter limb bones and more numerous finger and toe bones than those of their ancestors. The tail region of the body was long, and its end was slightly downcurved in a manner similar to that of the early ichthyosaurs. The backbone consisted of more than 100 vertebrae. The structure of the skull was very similar to that of the modern monitor lizards, to which mosasaurs are related. The jaws bore many conical, slightly recurved teeth set in individual sockets. The jawbones are notable in that they were jointed near mid-length (as in some of the advanced monitors) and connected in front by ligaments only. This arrangement enabled the animals not only to open the mouth by lowering the mandible but also to extend the lower jaws sideways while feeding on large prey.",
	},
};

function resetButtonsExcept(listenButton, stopButton) {
	for (let dinosaurName in dinosaurNoteMap) {
		const listenBtn = document.getElementById(`${dinosaurName}-listen-btn`);
		const stopBtn = document.getElementById(`${dinosaurName}-stop-btn`);

		if (listenBtn !== listenButton && stopBtn !== stopButton) {
			listenBtn.textContent = "Listen";
			stopBtn.style.display = "none";
			dinosaurNoteMap[dinosaurName].isListen = true;
		}
	}
}

function voiceHandler() {
	const voices = speechSynthesis.getVoices();
	const selectedVoice = voices[0];
	const RESUME = "Resume";
	const LISTEN = "Listen";
	const PAUSE = "Pause";
	const BLOCK = "block";
	const NONE = "none";

	for (let dinosaurName in dinosaurNoteMap) {
		const listenBtn = document.getElementById(`${dinosaurName}-listen-btn`);
		const stopBtn = document.getElementById(`${dinosaurName}-stop-btn`);

		listenBtn.onclick = function () {
			if (dinosaurNoteMap[dinosaurName].state === LISTEN) {
				speechSynthesis.cancel();
				resetButtonsExcept();

				let utter = new SpeechSynthesisUtterance(
					dinosaurNoteMap[dinosaurName].note
				);
				utter.voice = selectedVoice;
				utter.lang = "en-US";
				speechSynthesis.speak(utter);
				
				stopBtn.style.display = BLOCK;
				listenBtn.textContent = PAUSE;
				dinosaurNoteMap[dinosaurName].state = PAUSE;
			} else if (dinosaurNoteMap[dinosaurName].state === RESUME) {
				let utter = new SpeechSynthesisUtterance(
					dinosaurNoteMap[dinosaurName].note
				);
				utter.voice = selectedVoice;
				utter.lang = "en-US";
				speechSynthesis.resume();
				speechSynthesis.speak(utter);

				stopBtn.style.display = BLOCK;
				listenBtn.textContent = LISTEN;
				dinosaurNoteMap[dinosaurName].state = LISTEN;
			} else if (dinosaurNoteMap[dinosaurName].state === PAUSE) {
				window.speechSynthesis.pause();
				listenBtn.textContent = RESUME;
				dinosaurNoteMap[dinosaurName].state = RESUME;
			}
		};

		stopBtn.onclick = function () {
			window.speechSynthesis.cancel();
			listenBtn.textContent = LISTEN;
			dinosaurNoteMap[dinosaurName].state = LISTEN;
			stopBtn.style.display = NONE;
		};
	}
}

if ("onvoiceschanged" in speechSynthesis) {
	speechSynthesis.onvoiceschanged = voiceHandler;
} else {
	voiceHandler();
}

// speechSynthesis.addEventListener("voiceschanged", voiceHandler);

// const voices = speechSynthesis.getVoices();
// const selectedVoice = voices[0];
// const RESUME = "Resume";
// const LISTEN = "Listen";
// const PAUSE = "Pause";

// for (let dinosaurName in dinosaurNoteMap) {
// 	const listenBtn = document.getElementById(`${dinosaurName}-listen-btn`);
// 	const stopBtn = document.getElementById(`${dinosaurName}-stop-btn`);

// 	listenBtn.onclick = function () {
// 		if (dinosaurNoteMap[dinosaurName].isListen) {
// 			speechSynthesis.cancel();
// 			let utter = new SpeechSynthesisUtterance(
// 				dinosaurNoteMap[dinosaurName].note
// 			);

// 			utter.voice = selectedVoice;
// 			utter.lang = "en-US";
// 			window.speechSynthesis.resume();
// 			window.speechSynthesis.speak(utter);
// 			listenBtn.textContent = PAUSE;
// 			stopBtn.style.display = "block";
// 			utter.addEventListener("end", () => stopBtn.click());
// 		} else {
// 			window.speechSynthesis.pause();
// 			listenBtn.textContent = RESUME;
// 		}
// 		dinosaurNoteMap[dinosaurName].isListen =
// 			!dinosaurNoteMap[dinosaurName].isListen;
// 	};

// 	stopBtn.onclick = function () {
// 		window.speechSynthesis.cancel();
// 		listenBtn.textContent = LISTEN;
// 		dinosaurNoteMap[dinosaurName].isListen = true;
// 		stopBtn.style.display = "none";
// 	};
// }

// for (let dinosaurName in dinosaurNoteMap) {
// 	const listenBtnName = `${dinosaurName}-listen-btn`;
// 	const stopBtnName = `${dinosaurName}-stop-btn`;
// 	const listenBtn = document.getElementById(listenBtnName);
// 	const stopBtn = document.getElementById(stopBtnName);
// 	stopBtn.style.display = "none";

// 	listenBtn.onclick = function () {
// 		if (dinosaurNoteMap[dinosaurName].isListen) {
// 			voices = window.speechSynthesis.getVoices();
// 			let utter = new SpeechSynthesisUtterance(
// 				dinosaurNoteMap[dinosaurName].note
// 			);
// 			utter.voice = voices[0];
// 			utter.lang = "en-US";
// 			window.speechSynthesis.resume();
// 			speechSynthesis.speak(utter);
// 			listenBtn.textContent = "Pause";
// 			stopBtn.style.display = "block";

// 			utter.addEventListener("end", function () {
// 				window.speechSynthesis.cancel();
// 				listenBtn.textContent = "Listen";
// 				stopBtn.style.display = "none";
// 				dinosaurNoteMap[dinosaurName].isListen = true;
// 			});
// 		} else {
// 			window.speechSynthesis.pause();
// 			listenBtn.textContent = "Resume";
// 		}
// 		dinosaurNoteMap[dinosaurName].isListen =
// 			!dinosaurNoteMap[dinosaurName].isListen;
// 	};

// 	stopBtn.onclick = function () {
// 		window.speechSynthesis.cancel();
// 		listenBtn.textContent = "Listen";
// 		dinosaurNoteMap[dinosaurName].isListen = true;
// 		stopBtn.style.display = "none";
// 	};
// }
